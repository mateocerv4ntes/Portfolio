---
import 'photoswipe/style.css';
import '../../styles/photo/global.css';
import Header from "../../components/photo/header.astro";

const imageImports = import.meta.glob('../../assets/photo/people/*.{jpg,jpeg,png,webp,gif}', { eager: true });

// Build an array of image objects with optimized src and full-size src
const images = Object.values(imageImports).map((img) => {
  const filename = img.default.src.split('/').pop();
  return {
    thumb: img.default.src,  // optimized Astro asset
    full: `/photo/people/${filename}`, // full-res from public folder
    alt: filename.replace(/\.[^/.]+$/, ""),
  };
});
---

<html lang="en">
  <head>
    <title>People | Mateo Photography</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        margin: 0;
        font-size: 1.2rem;
        font-family: 'Chivo Mono', monospace;
        background: #fafafa;
      }

      header {
        font-family: 'Chivo Mono', monospace;
        display: flex;
        justify-content: flex-start;
        font-weight: 600;
        font-size: 3rem;
        color: #1b1d35;
        margin: 2.5rem;
      }

      .grid {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        padding: 2.5rem;
        max-width: 1624px;
      }

      .grid a img {
        height: auto;
        max-height: 324px;
        width: auto;
        object-fit: cover;
        flex-grow: 1;
        cursor: pointer;
        transition: transform 0.2s ease;
        user-select: none;
        -webkit-user-drag: none;
        background: #222;
      }

      .grid a img:hover {
        transform: scale(1.02);
      }
    </style>
  </head>

  <body>
    <Header />
    <header>People</header>

    <div class="grid" id="gallery">
      {images.map((img) => (
        <a
          href={img.full}
          data-pswp-width="4000"
          data-pswp-height="2667"
        >
          <img
            src={img.thumb}
            alt={img.alt}
            loading="lazy"
            decoding="async"
          />
        </a>
      ))}
    </div>

    <script type="module" src="../scripts/lightbox.js" client:load></script>

  </body>
</html>
